"use strict";var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Layer=function e(t){classCallCheck(this,e),this.sides=6,this.numShapes=this.sides,this.angle=360/this.numShapes,this.size=t,this.radius=this.size/2,this.numSteps=random([8,10]),this.stepLength=this.radius/this.numSteps,this.palette=[color(29,167,234),color(58,51,53),color(233,114,76)],this.color=random(this.palette),this.strokeWeight=random([1,2])};function polygon(e,t,s,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=360/e;beginShape();for(var o=0;o<e;o++){var a=t+cos(o*n+r)*i,h=s+sin(o*n+r)*i;vertex(a,h)}endShape(CLOSE)}var fade,Outline=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,Layer),createClass(t,[{key:"render",value:function(){noFill(),stroke(this.color),strokeWeight(this.strokeWeight),push(),random([!0,!1])?polygon(6,0,0,this.radius):ellipse(0,0,this.size,this.size),pop()}}]),t}(),Center=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.randomShape=random([1,2,3]),e.size=floor(random(e.numSteps/2,e.numSteps-2))*e.stepLength,e}return inherits(t,Layer),createClass(t,[{key:"render",value:function(){switch(noStroke(),fill(this.color),push(),this.randomShape){case 1:rect(0,0,this.size/2,this.size/2);break;case 2:ellipse(0,0,this.size,this.size);break;case 3:polygon(6,0,0,this.size,30)}pop()}}]),t}(),Circles=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.shapeSize=.93*e.radius,e.posX=e.radius-e.shapeSize/2,e}return inherits(t,Layer),createClass(t,[{key:"render",value:function(){noFill(),stroke(this.color),push();for(var e=0;e<this.numShapes;e++)ellipse(this.posX,0,this.shapeSize,this.shapeSize),rotate(this.angle);pop()}}]),t}(),Lines=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.numShapes=random([1,2])*e.sides,e.angle=360/e.numShapes,e.start=floor(random(e.numSteps-1)),e.end=floor(random(e.start,e.numSteps)),e}return inherits(t,Layer),createClass(t,[{key:"render",value:function(){stroke(this.color),strokeWeight(this.strokeWeight),push();for(var e=0;e<this.numShapes;e++)line(this.start*this.stepLength,0,this.end*this.stepLength,0),rotate(this.angle);pop()}}]),t}(),DottedLines=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.dotSize=1,e.offset=e.stepLength,e}return inherits(t,Layer),createClass(t,[{key:"render",value:function(){noStroke(),fill(this.color),push();for(var e=0;e<this.numShapes;e++){for(var t=this.offset;t<this.radius;t+=this.stepLength)rect(t,0,this.dotSize,this.dotSize);rotate(this.angle)}pop()}}]),t}(),Ring=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.fillColor=random([e.color,color(0,0,0,0)]),e.randomShape=random([1,2,3]),e.steps=floor(random(1,e.numSteps)),e.posX=e.steps*e.stepLength,e.size=floor(random(1,min(e.numSteps-e.steps,abs(0-e.steps))))*e.stepLength,e.angleOffset=random([0,60]),e}return inherits(t,Layer),createClass(t,[{key:"render",value:function(){fill(this.fillColor),stroke(this.color),strokeWeight(this.strokeWeight),push();for(var e=0;e<this.numShapes;e++){switch(this.randomShape){case 1:rect(this.posX,0,this.size,this.size);break;case 2:ellipse(this.posX,0,this.size,this.size);break;case 3:polygon(3,this.posX,0,this.size,this.angleOffset)}rotate(this.angle)}pop()}}]),t}(),Wave=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.offset=.15*e.radius,e.stepLength=.85*e.radius/e.numSteps,e}return inherits(t,Layer),createClass(t,[{key:"render",value:function(){noFill(),stroke(this.color),strokeWeight(this.strokeWeight),push();for(var e=1;e<=this.numSteps;e++)polygon(6,0,0,this.offset+e*this.stepLength,30);pop()}}]),t}(),layerConfig=[{class:Outline,weight:.7},{class:Center,weight:.7},{class:Circles,weight:.7},{class:Lines,weight:.7},{class:DottedLines,weight:.5},{class:Ring,weight:.7},{class:Wave,weight:.3}],Crystal=function(){function e(t,s,i){classCallCheck(this,e),this.x=t,this.y=s,this.layers=layerConfig.filter(function(e){return random(1)<=e.weight}).map(function(e){return new e.class(i)})}return createClass(e,[{key:"render",value:function(){push(),translate(this.x,this.y),this.layers.forEach(function(e){return e.render()}),pop()}}]),e}(),canvasInstance=void 0,needsDraw=!0;window.setup=function(){canvasInstance=createCanvas(windowWidth,windowHeight),angleMode(DEGREES),rectMode(RADIUS),fade=255},window.draw=function(){needsDraw&&(drawOnce(),needsDraw=!1,fill(0,0,0,fade),textSize(25),textStyle(BOLD),textAlign(CENTER),background(255,255,255,fade),text("Press space or \ndouble tap to regenerate.",windowWidth/2,windowHeight/2))};var card=document.querySelector("body");card.addEventListener("dblclick",function(e){needsDraw=!0,fade=0,console.log("double clicked")}),window.keyPressed=function(){32===keyCode&&(needsDraw=!0,fade=0)},window.drawOnce=function(){background(255);for(var e=min(250,min(windowWidth,windowHeight)-20),t=int((windowWidth-10)/(e+10)),s=int((windowHeight-10)/(e+10)),i=(windowWidth-t*e)/(t+1),r=(windowHeight-s*e)/(s+1),n=0;n<t*s;n++){var o=i+e/2+n%t*(e+i),a=r+e/2+int(n/t)*(e+r);new Crystal(o,a,e).render()}},window.windowResized=function(){resizeCanvas(windowWidth,windowHeight),needsDraw=!0};
